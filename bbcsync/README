BLAST bus synchronization README

The bbc_sync module works with the bbc_pci driver, and possibly others, to aid a
system in synchronizing to data from BLAST bus readout cards. This is done by
handling interrupts from the BLAST bus indicating a frame has arrived, and by
retrieving the serial number of that frame.

The PCI card can currently generate serial numbers and interrupts internally, or
do so in response to signals from an external synchronization box.

1) Installation

Should be as easy as:
$make
#make install
#insmod bbc_sync.ko

Note that make uses the kernel build system and requires all that that entails.

2) Using bbc_sync

Synchronization data is represented by bbc_sync as a struct timing_data (defined
in bbc_sync.h). The module handles two devices: a binary stream (bbc_sync--only
openable by one program at a time) of these structures; and a human readable 
text representation of the struct (bbc_sync_text).

The module is currently a skeleton and of little use. All data that needs to be
synchronized should be added to struct timing_data, and those fields should be
populated in the interrupt handler. The handler itself is divided in to a top
and bottom half, with the bottom half taking place in a workqueue.

A few convenience comments, prefaced with "USER" point to areas where code will
need to be added. However, it's likely that modifications will be wanted
elsewhere too.

The driver provides a comprehensive set of attributes for the devices under
the bbc_sync sysfs class. All should have human readable output and a few allow
writing of configuration parameters (see handlers in bbc_sync.c)
